(()=>{"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n,i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=function(t){if("object"!==s(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);e=e.call(t,"string");if("object"!==s(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(a.key),"symbol"===s(n)?n:String(n)),a)}}function e(t,e,n){e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function n(t,e){var n,i,e=1<arguments.length&&void 0!==e?e:0;null!=(n=window)&&n.drawEchartsDom&&(i=window.echarts.init(window.drawEchartsDom,t),1===e&&(i.dispose(),i=window.echarts.init(window.drawEchartsDom,t)),i.setOption(window.drawEchartsOption),window.addEventListener("resize",function(){return i.resize()}))}e(l,[{key:"on",value:function(t,e){this.events[t]||(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.events[t]&&this.events[t].forEach(function(t){return t.apply(void 0,n)})}},{key:"off",value:function(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}))}},{key:"has",value:function(t){return!!this.events[t]}},{key:"get",value:function(t){return this.events[t]}}]);var a=l,o=(e(r,[{key:"init",value:function(){var t=this,e=$("html");$(".menu-item.toggle").on("click",function(){e.addClass("active-mask"),t.switchSidebar(1)}),window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"}),$(".adsorption .switch-model").on("click",function(){var t=localStorage.getItem("Butterfly-data-theme")||"light";window.eventCore.emit("changeTheme","light"===t?"dark":"light"),"light"===t?(n("dark",1),$("html").attr("data-theme","dark"),localStorage.setItem("Butterfly-data-theme","dark"),window.dataTheme="dark"):(n("light",1),$("html").attr("data-theme","light"),localStorage.setItem("Butterfly-data-theme","light"),window.dataTheme="light")}),$(".adsorption .back-top").on("click",function(){$("html").animate({scrollTop:0},300)}),$(".global-mask").on("click",function(){e.removeClass("active-mask"),t.switchSidebar(0)})}},{key:"switchSidebar",value:function(t){var e=$(".sidebar");1===t?e.css({transform:"translate3d(-100%, 0, 0)"}):e.css({transform:"translate3d(0, 0, 0)"})}},{key:"sidebar",value:function(){var t=$(".sidebar-menus .menu-item");t.length&&t.each(function(){$(this).hasClass("relative")&&$(this).on("click",function(){$(this).toggleClass("active").children(".menu-child").stop().toggle("fast")})})}},{key:"scroll",value:function(){var n=$(".header .nav"),i=$(".adsorption"),a=$(".post .aside .post-sticky"),s=0;window.addEventListener("scroll",function(n,i){function a(){l=!1===i.leading?0:(new Date).getTime(),s=null,n.apply(o,r),o=r=null}var s,o,r,l=0;i=i||{};return function(){var t=(new Date).getTime(),e=200-(t-(l=l||!1!==i.leading?l:t));o=this,r=arguments,e<=0||200<e?(s&&(clearTimeout(s),s=null),l=t,n.apply(o,r),s||(o=r=null)):s||!1===i.leading||(s=setTimeout(a,e))}}(function(t){var e=window.scrollY||document.documentElement.scrollTop;56<e?(s<=e?(n.hasClass("visible")&&n.addClass("hidden").removeClass("visible"),a&&a.css("top",""),i.hasClass("active")||i.addClass("active")):(n.hasClass("visible")||n.addClass("visible").removeClass("hidden"),a&&a.css("top","70px")),n.hasClass("style")||n.addClass("style")):0===e&&(n.removeClass("style visible hidden"),i.hasClass("active"))&&i.removeClass("active"),s=e}))}},{key:"runDay",value:function(){var t,e,n=$(".aside-web-info .run-day");n&&(e=n.attr("data-runday"))&&("Invalid Date"!==(t=new Date).toString()?(t=t.getTime()-new Date(e).getTime(),e=parseInt((t/864e5).toString()),n.html(e+" 天")):n.html('<span style="color:#fd0000">建站时间配置错误</span>'))}}]),r);function r(){t(this,r),this.init(),this.sidebar(),this.scroll(),this.runDay(),window.eventCore=new a}function l(){t(this,l),this.events={}}document.addEventListener("DOMContentLoaded",function(){return window.GlobalClass=new o})})();